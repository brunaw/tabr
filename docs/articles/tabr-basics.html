<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic example • tabr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Basic example">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46129458-3', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-info-circle"></span>
     
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tabr-basics.html">Basic example</a>
    </li>
    <li>
      <a href="../articles/tabr-phrases.html">Musical phrases</a>
    </li>
    <li>
      <a href="../articles/tabr-helpers.html">Phrase helpers</a>
    </li>
    <li>
      <a href="../articles/tabr-chords.html">Chords</a>
    </li>
    <li>
      <a href="../articles/tabr-repeats.html">Repeats</a>
    </li>
    <li>
      <a href="../articles/tabr-tracks-scores.html">Tracks and scores</a>
    </li>
    <li>
      <a href="../articles/tabr-engraving.html">Engraving</a>
    </li>
    <li>
      <a href="../articles/tabr-tunings.html">Strings and tunings</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/tabr-ex1.html">Tuning and capo</a>
    </li>
    <li>
      <a href="../articles/tabr-ex2.html">Multiple voices</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/tabr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Basic example</h1>
            
      
      <small>Source: <a href="https://github.com/leonawicz/tabr/blob/master/vignettes/tabr-basics.Rmd"><code>vignettes/tabr-basics.Rmd</code></a></small>

    </div>

    
    
<p>A good place to start is with a simple, reproducible example that outlines the basic flow from small, succinct musical phrases, which combine to form tracks, in turn combined into a score, and ending with engraving the score to familiar sheet music. The brief example below recreates the single measure of guitar tablature shown in the <code>tabr</code> logo. Here are the steps as a list.</p>
<ul>
<li>Define a musical phrase with <code>phrase</code> or the shorthand alias <code>p</code>.</li>
<li>Add the phrase to a <code>track</code>.</li>
<li>Add the track to a <code>score</code>.</li>
<li>Render the score to pdf with <code>tab</code>.</li>
</ul>
<div id="constructing-a-musical-phrase" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-musical-phrase" class="anchor"></a>Constructing a musical phrase</h2>
<p>A phrase here does not require a strict definition. Think of it as the smallest piece of musical structure you intend to string together. The first argument to <code>phrase</code> is a string describing notes of a specific pitch (or rests: “r”), separated in time by spaces. For chords, just remove spaces to indicate simultaneous notes. Integers are appended to indicate the octave number so that the pitch is unique. For example, a rest followed by a sequence of notes might be given by <code>notes = "r a2 c3 f3 d3 a3 f3"</code>.</p>
<p>The second argument is a similar string giving note metadata. In this example there is nothing to add but the time durations. Whole notes taking up an entire measure of music are given by 1, half notes by 2, quarter notes 4, eighth notes 8, and so on. To specify a quarter note rest followed by a sequence of eighth notes, use <code>info = "4 8 8 8 8 8 8"</code>. This basic example does not require specifying additional note information such as dotted notes for different fractions of time, staccato notes, ties/slurs, slides, bends, hammer ons and pull offs, etc. These specifications are currently available in <code>tabr</code> to varying degrees of development and are covered in the vignette tutorials.</p>
<p>The third argument, <code>string</code>, is optional but generally important for guitar tablature. In similar format, it specifies the strings of the guitar on which notes are played. Providing this information fixes the fret-string combinations so that LilyPond does not have to guess what position on the neck of the guitar to play a specific note. An inability to specify this in various tablature notation software (or laziness by the user), is a common cause of inaccurate tabs scouring the internet, where even when the notes are correct they are written in the tab suggesting they be played in positions no one would sensibly use. Note that the <code>x</code> shown below is just a placeholder indicating no need to specify a string for the quarter note rest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tabr)
<span class="kw">phrase</span>(<span class="dt">notes =</span> <span class="st">"r a2 c3 f3 d3 a3 f3"</span>, <span class="dt">info =</span> <span class="st">"4 8 8 8 8 8 8"</span>, <span class="dt">string =</span> <span class="st">"x 5 5 4 4 3 4"</span>)
<span class="co">#&gt; r4 &lt;a,\5&gt;8 &lt;c\5&gt;8 &lt;f\4&gt;8 &lt;d\4&gt;8 &lt;a\3&gt;8 &lt;f\4&gt;8</span></code></pre></div>
<p>The print method for <code>phrase</code> uses cat rather than print because the phrase strings print better this way given the preponderance of backslashes in the output. This result shows (one way) how to write the LilyPond markup.</p>
<p>Before going further, a brief aside on how there is no free lunch, no way to be completely unambiguous with the music notation while greatly restricting the amount of typing. Ultimately, every song is unique and must be written out differently in R just as in LilyPond or elsewhere. While doing this programmatically can be highly efficient for writing out new sections or editing existing sections of music that are highly repetitive, there will always be just as many instances of musical sequences that are not sufficiently repetitive, incorporating subtle deviations, or highly unpatterned sections like a guitar solo.</p>
<p>There is no way around it; even in cases where using <code>tabr</code> as a wrapper is much more convenient than typing out a LilyPond file directly, there can still be plenty of typing. Generic coding to avoid code duplication is helpful, but is never going to be a magical solution enabling extreme code reduction when writing all but the simplest and most boring musical scores.</p>
<p>In the interest of minimizing typing, one thing that you can do is use the alias <code>p</code> for <code>phrase</code> and drop the argument names, which will be used repeatedly and remembering them will not be difficult. Store the phrase:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/phrase.html">p</a></span>(<span class="st">"r a2 c3 f3 d3 a3 f3"</span>, <span class="st">"4 8 8 8 8 8 8"</span>, <span class="st">"x 5 5 4 4 3 4"</span>)</code></pre></div>
</div>
<div id="tracks" class="section level2">
<h2 class="hasAnchor">
<a href="#tracks" class="anchor"></a>Tracks</h2>
<p>Track construction is as simple as wrapping a phrase object in <code>track</code>. This example uses a single phrase. Typically a track would consist of many phrases glued together. Tracks are just tibble data frames with an additional track class.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">track1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/track.html">track</a></span>(p1)
track1
<span class="co">#&gt; # A tibble: 1 x 6</span>
<span class="co">#&gt;   phrase       tuning         voice staff    ms_transpose ms_key</span>
<span class="co">#&gt;   &lt;list&gt;       &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;           &lt;int&gt; &lt;chr&gt; </span>
<span class="co">#&gt; 1 &lt;S3: phrase&gt; e, a, d g b e'     1 treble_8            0 &lt;NA&gt;</span></code></pre></div>
</div>
<div id="scores" class="section level2">
<h2 class="hasAnchor">
<a href="#scores" class="anchor"></a>Scores</h2>
<p>The complete score is composed of one or more tracks. This example has only a single track. Just as the track constructor takes phrases, the score constructor takes tracks as inputs. Score objects are tibble data frames with an additional score class.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">song &lt;-<span class="st"> </span><span class="kw"><a href="../reference/score.html">score</a></span>(track1)
song
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   phrase       tuning         voice staff    ms_transpose ms_key tabstaff</span>
<span class="co">#&gt;   &lt;list&gt;       &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 &lt;S3: phrase&gt; e, a, d g b e'     1 treble_8            0 &lt;NA&gt;          1</span></code></pre></div>
</div>
<div id="calling-lilypond-from-r" class="section level2">
<h2 class="hasAnchor">
<a href="#calling-lilypond-from-r" class="anchor"></a>Calling LilyPond from R</h2>
<p>Once a score object is created, it is ready to be sent to LilyPond. If LilyPond is installed on your system (and added to your system PATH variable on Windows systems), <code>tab</code> should call it successfully. Alternatively, on Windows, it can be added explicitly by calling <code>tabr_options</code> as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/tabr_options.html">tabr_options</a></span>(<span class="dt">lilypond =</span> <span class="st">"C:/Program Files (x86)/LilyPond/usr/bin/lilypond.exe"</span>)</code></pre></div>
<p>Technically, when loading <code>tabr</code> on Windows it will attempt to check the specific path above to see if <code>lilypond.exe</code> exists there. If it does, the path in <code>tabr_options</code> will be filled in for you. Therefore, if you need to specify the LilyPond path because it is not in your PATH environment variable and nothing shows in <code><a href="../reference/tabr_options.html">tabr_options()</a></code>, then the path shown above is probably not where you installed LilyPond.</p>
</div>
<div id="score-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#score-metadata" class="anchor"></a>Score metadata</h2>
<p>Other than ensuring LilyPond is accessible, there is only one function left to call in this series of steps to produce the sheet music. <code>tab</code> takes several arguments, many of which are optional and have default values. However, since music is so variable it makes sense to specify these arguments every time. These arguments include metadata about the piece such as key signature, time signature, tempo, title, author, and so on. Most of that is not needed here, but for good practice at least be unambiguous about the music itself and specify a key signature, time signature and tempo.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/tab.html">tab</a></span>(song, <span class="st">"phrase.pdf"</span>, <span class="dt">key =</span> <span class="st">"dm"</span>, <span class="dt">time =</span> <span class="st">"4/4"</span>, <span class="dt">tempo =</span> <span class="st">"4 = 120"</span>)</code></pre></div>
<pre><code>#&gt; #### Engraving score to phrase.pdf ####
#&gt; GNU LilyPond 2.18.2
#&gt; Processing `./phrase.ly'
#&gt; Parsing...
#&gt; Interpreting music...
#&gt; Preprocessing graphical objects...
#&gt; Interpreting music...
#&gt; MIDI output to `./phrase.mid'...
#&gt; Finding the ideal number of pages...
#&gt; Fitting music on 1 page...
#&gt; Drawing systems...
#&gt; Layout output to `./phrase.ps'...
#&gt; Converting to `./phrase.pdf'...
#&gt; Success: compilation successfully completed</code></pre>
<p>This log output will be printed at the R console. Load the new pdf file to see the result. It should look like this.</p>
<p align="center">
<img src="https://github.com/leonawicz/tabr/blob/master/data-raw/vignette-pngs/ex00.png?raw=true" width="50%"></p>
<p>To recap, the <code>phrase</code> is defined, added to a <code>track</code>, the track is added to a <code>score</code>, and the score is rendered to tablature in a pdf file with <code>tab</code>. The next tutorial section discusses phrases in more detail and provides an overview of the different notes and note metadata that can be specified when constructing a phrase.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#constructing-a-musical-phrase">Constructing a musical phrase</a></li>
      <li><a href="#tracks">Tracks</a></li>
      <li><a href="#scores">Scores</a></li>
      <li><a href="#calling-lilypond-from-r">Calling LilyPond from R</a></li>
      <li><a href="#score-metadata">Score metadata</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://leonawicz.github.io/">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
